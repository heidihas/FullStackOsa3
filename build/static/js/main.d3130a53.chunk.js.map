{"version":3,"sources":["components/Person.js","services/persons.js","App.js","index.js"],"names":["Person","_ref","person","deletePerson","react_default","a","createElement","name","number","onClick","baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","concat","del","delete","Input","text","v","oC","value","onChange","Button","_ref2","type","Filter","_ref3","show","handleShow","App_Input","NewPersonForm","_ref4","newName","newNumber","addPerson","handleNameChange","handleNumberChange","onSubmit","App_Button","Notification","_ref5","message","className","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","event","preventDefault","state","map","includes","window","confirm","personUpdate","find","p","changedPerson","objectSpread","personService","updatePerson","setState","notice","setTimeout","catch","error","console","log","nameObject","personsOther","filter","newPerson","deletePersonOf","deletedPerson","newPersons","target","_this2","_this3","personsToShow","note","toLowerCase","App_Notification","App_Filter","App_NewPersonForm","components_Person","key","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d3130a53.chunk.js","sourcesContent":["import React from 'react';\n\nconst Person = ({ person, deletePerson }) => {\n    return (\n        <tr>\n            <td>{person.name}</td>\n            <td>{person.number}</td>\n            <td>\n                <button onClick={deletePerson}>poista</button>\n            </td>\n        </tr>\n    )\n}\n\nexport default Person","import axios from 'axios'\nconst baseUrl = 'http://fullstack-persons2018.herokuapp.com/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst del = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, del }","import React from 'react';\nimport './index.css';\nimport Person from './components/Person';\nimport personService from './services/persons';\n\nconst Input = ({ text, v, oC }) => {\n    return (\n        <div>\n            {text} <input value={v} onChange={oC} />\n        </div>\n    )\n}\n\nconst Button = ({ text }) => {\n    return (\n        <div>\n            <button type=\"submit\">{text}</button>\n        </div>\n    )\n}\n\nconst Filter = ({ show, handleShow }) => {\n    return (\n        <Input text='rajaa näytettäviä:' v={show} oC={handleShow} />\n    )\n}\n\nconst NewPersonForm = ({ newName, newNumber, addPerson, handleNameChange, handleNumberChange, text }) => {\n    return (\n        <form onSubmit={addPerson}>\n            <Input text='nimi:' v={newName} oC={handleNameChange} />\n            <Input text='numero:' v={newNumber} oC={handleNumberChange} />\n            <Button text={text} />\n        </form>\n    )\n}\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      show: '',\n      newName: 'uusi henkilö...',\n      newNumber: 'uusi numero...',\n      notice: null\n    }\n    console.log('constructor')\n  }\n\n  componentDidMount() {\n      console.log('did mount')\n      personService\n        .getAll()\n        .then(persons => {\n            console.log('promise fulfilled')\n            this.setState({persons})\n        })\n  }\n\n  addPerson = (event) => {\n      event.preventDefault()\n\n      const compare = this.state.persons.map(person => person.name)\n\n      if (compare.includes(this.state.newName)) {\n            if (window.confirm(this.state.newName+' on jo luettelossa. Korvataanko vanha numero uudella?')) {\n                const personUpdate = this.state.persons.find(p => p.name === this.state.newName)\n                const changedPerson = { ...personUpdate, number: this.state.newNumber }\n\n                personService\n                    .update(personUpdate.id, changedPerson)\n                    .then(updatePerson => {\n                        this.setState({\n                            persons: this.state.persons.map(person => person.id !== personUpdate.id ? person : updatePerson),\n                            newName: '',\n                            newNumber: '',\n                            notice: `henkilön `+updatePerson.name+` numero vaihdettiin`\n                        })\n                        setTimeout(() => {\n                            this.setState({notice: null})\n                        }, 2000)\n                    })\n                    .catch(error => {\n                        console.log(error)\n                        const nameObject = {\n                            name: this.state.newName,\n                            number: this.state.newNumber\n                        }\n                        const personsOther = this.state.persons.filter(person => person.name !== this.state.newName)\n                        personService\n                            .create(nameObject)\n                            .then(newPerson => {\n                                this.setState({\n                                    persons: personsOther.concat(newPerson),\n                                    newName: '',\n                                    newNumber: '',\n                                    notice: `lisättiin uudelleen `+newPerson.name\n                                }) \n                            setTimeout(() => {\n                                this.setState({notice: null})\n                            }, 2000)\n                        })\n                    })\n            } else {\n                this.setState({\n                    newName: '',\n                    newNumber: ''\n                })\n            }\n      } else {\n        const nameObject = {\n            name: this.state.newName,\n            number: this.state.newNumber\n        }\n  \n        personService\n            .create(nameObject)\n            .then(newPerson => {\n                this.setState({\n                    persons: this.state.persons.concat(newPerson),\n                    newName: '',\n                    newNumber: '',\n                    notice: `lisättiin `+newPerson.name\n                }) \n                setTimeout(() => {\n                    this.setState({notice: null})\n                }, 2000)\n            })   \n      }\n  }\n\n  deletePersonOf = (id) => {\n    const find = this.state.persons.filter(p => p.id === id)\n    const name = find[0].name\n    \n    return () => {\n        if (window.confirm('Poistetaanko '+name+'?')) {\n        console.log('poistetaan')\n        personService\n            .del(id)\n            .then(deletedPerson => {\n                const newPersons = this.state.persons.filter(p => p.id !== id)\n                this.setState({\n                    persons: newPersons,\n                    notice: `poistettiin `+name\n                })\n                setTimeout(() => {\n                    this.setState({notice: null})\n                }, 2000) \n            })\n        } else {\n            console.log('ei poistettu') \n        }\n    }\n  }\n\n  handleShow = (event) => {\n      console.log(event.target.value)\n      this.setState({ show: event.target.value })\n  }\n\n  handleNameChange = (event) => {\n      console.log(event.target.value)\n      this.setState({ newName: event.target.value })\n  }\n\n  handleNumberChange = (event) => {\n      console.log(event.target.value)\n      this.setState({ newNumber: event.target.value })\n  }\n\n  render() {\n    console.log('render')\n    const personsToShow =\n        (this.state.show === '') ?\n            this.state.persons :\n            this.state.persons.filter(note => note.name.toLowerCase().includes(this.state.show.toLowerCase()))\n\n    return (\n      <div>\n        <h2>Puhelinluettelo</h2>\n        <Notification message={this.state.notice}/>\n        <Filter show={this.state.show} handleShow={this.handleShow} />\n        <h3>Lisää uusi/muuta henkilön numeroa</h3>\n        <NewPersonForm \n            newName={this.state.newName}\n            newNumber={this.state.newNumber}\n            addPerson={this.addPerson}\n            handleNameChange={this.handleNameChange}\n            handleNumberChange={this.handleNumberChange}\n            text=\"lisää\"   \n        />\n        <h3>Numerot</h3>\n        <table>\n            <tbody>\n                {personsToShow.map(person =>\n                    <Person\n                        key={person.name}\n                        person={person}\n                        deletePerson={this.deletePersonOf(person.id)}\n                    />\n                )}\n            </tbody>\n        </table>\n    </div>\n    )\n  }\n}\n    \nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}