(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(11),u=n.n(r),s=(n(5),n(16)),l=n(12),i=n(13),c=n(15),m=n(14),h=n(17),d=function(e){var t=e.person,n=e.deletePerson;return o.a.createElement("tr",null,o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.number),o.a.createElement("td",null,o.a.createElement("button",{onClick:n},"poista")))},f=n(2),w=n.n(f),p="http://fullstack-persons2018.herokuapp.com/api/persons",v={getAll:function(){return w.a.get(p).then(function(e){return e.data})},create:function(e){return w.a.post(p,e).then(function(e){return e.data})},update:function(e,t){return w.a.put("".concat(p,"/").concat(e),t).then(function(e){return e.data})},del:function(e){return w.a.delete("".concat(p,"/").concat(e)).then(function(e){return e.data})}},N=function(e){var t=e.text,n=e.v,a=e.oC;return o.a.createElement("div",null,t," ",o.a.createElement("input",{value:n,onChange:a}))},b=function(e){var t=e.text;return o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},t))},g=function(e){var t=e.show,n=e.handleShow;return o.a.createElement(N,{text:"rajaa n\xe4ytett\xe4vi\xe4:",v:t,oC:n})},E=function(e){var t=e.newName,n=e.newNumber,a=e.addPerson,r=e.handleNameChange,u=e.handleNumberChange,s=e.text;return o.a.createElement("form",{onSubmit:a},o.a.createElement(N,{text:"nimi:",v:t,oC:r}),o.a.createElement(N,{text:"numero:",v:n,oC:u}),o.a.createElement(b,{text:s}))},S=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"error"},t)},C=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).addPerson=function(e){if(e.preventDefault(),n.state.persons.map(function(e){return e.name}).includes(n.state.newName))if(window.confirm(n.state.newName+" on jo luettelossa. Korvataanko vanha numero uudella?")){var t=n.state.persons.find(function(e){return e.name===n.state.newName}),a=Object(s.a)({},t,{number:n.state.newNumber});v.update(t.id,a).then(function(e){n.setState({persons:n.state.persons.map(function(n){return n.id!==t.id?n:e}),newName:"",newNumber:"",notice:"henkil\xf6n "+e.name+" numero vaihdettiin"}),setTimeout(function(){n.setState({notice:null})},2e3)}).catch(function(e){console.log(e);var t={name:n.state.newName,number:n.state.newNumber},a=n.state.persons.filter(function(e){return e.name!==n.state.newName});v.create(t).then(function(e){n.setState({persons:a.concat(e),newName:"",newNumber:"",notice:"lis\xe4ttiin uudelleen "+e.name}),setTimeout(function(){n.setState({notice:null})},2e3)})})}else n.setState({newName:"",newNumber:""});else{var o={name:n.state.newName,number:n.state.newNumber};v.create(o).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",notice:"lis\xe4ttiin "+e.name}),setTimeout(function(){n.setState({notice:null})},2e3)})}},n.deletePersonOf=function(e){var t=n.state.persons.filter(function(t){return t.id===e})[0].name;return function(){window.confirm("Poistetaanko "+t+"?")?(console.log("poistetaan"),v.del(e).then(function(a){var o=n.state.persons.filter(function(t){return t.id!==e});n.setState({persons:o,notice:"poistettiin "+t}),setTimeout(function(){n.setState({notice:null})},2e3)})):console.log("ei poistettu")}},n.handleShow=function(e){console.log(e.target.value),n.setState({show:e.target.value})},n.handleNameChange=function(e){console.log(e.target.value),n.setState({newName:e.target.value})},n.handleNumberChange=function(e){console.log(e.target.value),n.setState({newNumber:e.target.value})},n.state={persons:[],show:"",newName:"uusi henkil\xf6...",newNumber:"uusi numero...",notice:null},console.log("constructor"),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("did mount"),v.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t})})}},{key:"render",value:function(){var e=this;console.log("render");var t=""===this.state.show?this.state.persons:this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.show.toLowerCase())});return o.a.createElement("div",null,o.a.createElement("h2",null,"Puhelinluettelo"),o.a.createElement(S,{message:this.state.notice}),o.a.createElement(g,{show:this.state.show,handleShow:this.handleShow}),o.a.createElement("h3",null,"Lis\xe4\xe4 uusi/muuta henkil\xf6n numeroa"),o.a.createElement(E,{newName:this.state.newName,newNumber:this.state.newNumber,addPerson:this.addPerson,handleNameChange:this.handleNameChange,handleNumberChange:this.handleNumberChange,text:"lis\xe4\xe4"}),o.a.createElement("h3",null,"Numerot"),o.a.createElement("table",null,o.a.createElement("tbody",null,t.map(function(t){return o.a.createElement(d,{key:t.name,person:t,deletePerson:e.deletePersonOf(t.id)})}))))}}]),t}(o.a.Component);u.a.render(o.a.createElement(C,null),document.getElementById("root"))},5:function(e,t,n){}},[[18,2,1]]]);
//# sourceMappingURL=main.d3130a53.chunk.js.map